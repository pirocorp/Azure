# Asynchronously process messages by using Azure Service Bus Queues


# Architecture diagram

![image](https://user-images.githubusercontent.com/34960418/169288813-e23828ce-a304-4317-bc44-a8609a5fa4f9.png)


# Create Azure resources

## Open the [Azure portal](https://portal.azure.com/)


## Create an Azure Service Bus queue

In the Azure portal, use the **Search resources, services, and docs** text box to search for **Service Bus** and then, in the list of results, select **Service Bus**. On the **Service Bus** blade, select **+ Create**.

![image](https://user-images.githubusercontent.com/34960418/169289319-bf799afd-d623-424c-8b1b-21910e513f55.png)


On the **Create namespace** blade, on the **Basics** tab, perform the following actions, and select **Review + create**:
        
| Setting                           | Action                                                       |
| --------------------------------- | ------------------------------------------------------------ |
| **Subscription** drop-down list    |Retain the default value. |
| **Resource group** section | Select **Create new**, enter **AsyncProcessor**, and then select **OK**.|
| **Namespace name** text box | Enter **sbnamespace**_[yourname]_.|
| **Region** drop-down list |  Select any Azure region in which you can deploy an Azure Service Bus.|
| **Pricing tier** drop-down list |  Select **Basic**.|

The following screenshot displays the configured settings on the **Basics** tab on the **Create namespace** blade.

![image](https://user-images.githubusercontent.com/34960418/169289628-98cdf7db-d299-473e-b7c3-c7c6c1b9d642.png)


On the **Review + create** tab, review the options that you selected during the previous steps. Select **Create** to create the **Service Bus** namespace by using your specified configuration.

> **Note**: Wait for the creation task to complete before you proceed with this lab.


On the **Deployment** blade, select the **Go to resource** button to navigate to the blade of the newly created **Service Bus** namespace. On the **Service Bus** namespace blade, in the **Settings** section, select **Shared access policies**. In the list of policies, select **RootManageSharedAccessKey**. On the **SAS Policy: RootManageSharedAccessKey** pane, next to the **Primary Connection String** entry, select the **Copy to clipboard** button, and record the copied value. You'll use it later in this lab.

![image](https://user-images.githubusercontent.com/34960418/169290987-6b0c9cef-c28f-4fde-8b49-60e242212e1b.png)

> **Note**: It doesn't matter which of the two available keys you choose. They are interchangeable.


On the **Service Bus** namespace blade, in the **Entities** section, select **Queues**, and then select **+ Queue**.

![image](https://user-images.githubusercontent.com/34960418/169291305-7640872c-1c68-4b44-a8b2-9bce404d1100.png)


On the **Create queue** blade, review the available settings, in the **Name** text box, enter **messagequeue**, and then select **Create**. 

![image](https://user-images.githubusercontent.com/34960418/169291550-6d5f91bf-a89a-49a5-8992-0e31693de2e0.png)


Select **messagequeue** to display the properties of the **Service Bus** queue. Leave the browser window open. You'll use it again later in this lab.

![image](https://user-images.githubusercontent.com/34960418/169291653-97bdd23b-ff09-461e-a0cd-e4742b0dbc6d.png)


## Review

In this exercise, you created an Azure **Service Bus** namespace and a **Service Bus** queue that you'll use through the remainder of the lab.


# Create a .NET Core project to publish messages to a Service Bus queue

## Create a .NET Core project





