# Create a multi-tier solution by using Azure services


# Architecture diagram

![image](https://user-images.githubusercontent.com/34960418/169032789-fd4da015-8826-46a9-88a1-4ae805278905.png)


# Create an Azure App Service resource by using a Docker container image

## Open the [Azure portal](https://portal.azure.com)


## Create a web app by using Azure App Service resource by using an httpbin container image

In the Azure portal, use the **Search resources, services, and docs** text box to search for **App Services** and, in the list of results, select **App Services**. On the **App Services** blade, select **+ Create**.

![image](https://user-images.githubusercontent.com/34960418/169034373-77372c43-e0bf-44c0-97b4-b7d4de2a5d3f.png)


On the **Create Web App** blade, on the **Basics** tab, perform the following actions:
    
| Setting | Action |
| --- | --- |
| **Subscription** drop-down list | Retain the default value. |
| **Resource group** section      | Select **Create new**, enter **ApiService**,  and then select **OK**. |
| **Name** text box  | Enter **httpapi** *[yourname]* |
| **Publish** section  | Select **Docker Container** |
| **Operating System** section | Select **Linux** |
| **Region** drop-down  list | Select any Azure region in which you can deploy an Azure web app. |
| **App Service Plan** section | Select **Create new**, enter  the value **ApiPlan** in the **Name** text  box, and then select **OK**. |
| **SKU and size** section | Select **Change size**, on the **Spec  Picker** blade, select **See additional options**, select **S1**, and then select **Apply**. |

Select **Next: Docker >**.

![image](https://user-images.githubusercontent.com/34960418/169036781-beda5d7a-ed59-4d85-b285-ec2d8fb672e9.png)


On the **Docker** tab, perform the following actions, and then select **Review + create**:

| Setting | Action  |
| --- | --- |
| **Options** drop-down list  | Select **Single Container** |
| **Image Source** drop-down list | Select **Docker Hub** |
| **Access Type** drop-down list  | Select **Public** |
| **Image and tag** text box      | Enter **kennethreitz/httpbin:latest** |

On the **Review + create** tab, review the options that you selected during the previous steps. Select **Create** to create the web app by using your specified configuration.

> **Note**: Wait for the creation task to complete before you proceed with this lab.


## Test the httpbin web application

On the blade displaying the newly created app properties, select **Browse**. 

![image](https://user-images.githubusercontent.com/34960418/169037643-bfca1c5d-cca3-4850-8210-2870582341d0.png)

![image](https://user-images.githubusercontent.com/34960418/169037699-86bab58a-6eca-4d93-b73d-51f0766ddc9b.png)


Within the web application select **Response formats**. Select **GET /html**. Select **Try it out**. Select **Execute**. 

![image](https://user-images.githubusercontent.com/34960418/169037998-bfdb89ea-087e-4389-b0ec-a615fe61665e.png)


Review the value of the **Response body** and **Response headers** text boxes. Review the value of the **Request URL** text box.

![image](https://user-images.githubusercontent.com/34960418/169038276-02d15d4d-1414-4755-a0de-277600f1503f.png)


Within the web application, perform the following actions: Select **Dynamic data**. Select **GET /bytes/{n}**. Select **Try it out**. In the **n** text box, enter **25**. Select **Execute**.

![image](https://user-images.githubusercontent.com/34960418/169038781-ad3985bd-0309-4337-86b7-cb8445f4c31e.png)


Review the value of the **Response body** and **Response headers** text boxes. Select **Download file**, and after the file downloads, open it in Notepad, review its content, and then close it.

![image](https://user-images.githubusercontent.com/34960418/169039015-30596027-5021-45f5-85da-e792bdbbbd06.png)

![image](https://user-images.githubusercontent.com/34960418/169039120-2e21d541-cae8-4389-8839-51f4d53f31cc.png)

> **Note**: The file contains a sequence of randomly generated bytes.


Within the web application, perform the following actions: Select **Status codes**. Select **GET /status/{codes}**. Select **Try it out**. In the **codes** text box, enter **404**. Select **Execute**.

![image](https://user-images.githubusercontent.com/34960418/169039451-816c9100-862e-42a7-b54f-923c8d0f3c3f.png)


Review the **Server response** and note that it includes **Error: NOT FOUND** entry.

![image](https://user-images.githubusercontent.com/34960418/169039582-093cc953-fcf3-41b4-82a1-6d708206abc7.png)

